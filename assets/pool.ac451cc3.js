import{_ as D,r as m,v as P,o as d,c as u,i as o,t as c,F as f,d as S,p as b,b as l,l as $,x as U,z as q,q as A,u as F,X as R,w as h,k as g,e as L}from"./index.ac3816d8.js";const T={name:"NewPair",props:{tableList:Array,loading:{type:Boolean,default:!1}},data(){return{defaultIcon:new URL("/assets/icon-default.995adb35.png",self.location).href}},computed:{isLoading(){return this.loading}},methods:{tableRowClick(e){var t,a,p,n,r;if((t=window==null?void 0:window.main)!=null&&t.openMarket)(p=(a=window==null?void 0:window.main)==null?void 0:a.openMarket)==null||p.call(a,e.target_token,e.chain);else if((r=(n=window==null?void 0:window.webkit)==null?void 0:n.messageHandlers)!=null&&r.iOS_Native_InjectJavascript){let _=e.target_token===e.token0_address?e.token0_symbol:e.token1_symbol;this.$f.callIos("openMarketPage",e.target_token,e.chain,_)}else this.$f.openBrowser("https://ave.ai/token/"+e.target_token+"-"+e.chain)}}},v=e=>(A("data-v-6195c6b1"),e=e(),F(),e),H={class:"table"},J={class:"table-list"},X={class:"table-item table-header"},G={class:"table-item_d"},K={class:"table-item_d"},Q=v(()=>o("th",{class:"table-item_d th"},"AMM",-1)),W={class:"table-item_d th"},Y={class:"table-item_d"},Z=["onClick"],x={class:"table-item_d symbol"},ee={key:0},te={class:"main"},ne=v(()=>o("br",null,null,-1)),oe={class:"minor"},se={key:1},ie={class:"main"},ae=v(()=>o("br",null,null,-1)),le={class:"minor"},re={class:"table-item_d"},ce={class:"main"},de=v(()=>o("br",null,null,-1)),he={class:"minor"},me={class:"main"},ue=v(()=>o("br",null,null,-1)),pe={class:"minor"},_e={class:"table-item_d"},fe=["src"],ve={class:"table-item_d"},ge=["src"],be={class:"table-item_d"},ke={class:"main"},ye=v(()=>o("br",null,null,-1)),we={class:"minor"};function $e(e,t,a,p,n,r){const _=m("van-image"),k=m("van-empty"),y=P("imageError");return d(),u("div",H,[o("table",J,[o("tr",X,[o("th",G,c(e.$t("poolPair")),1),o("th",K,c(e.$t("pairAmount")),1),Q,o("th",W,c(e.$t("chain")),1),o("th",Y,c(e.$t("poolSize")),1)]),(d(!0),u(f,null,S(a.tableList,(i,N)=>(d(),u("tr",{class:"table-item",key:N,onClick:b(z=>r.tableRowClick(i),["stop"])},[o("td",x,[i.target_token===i.token0_address?(d(),u("div",ee,[o("div",te,[l(_,{class:"icon-token",round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem","lazy-load":"","show-loading":"",src:e.$f.formatIcon(`${i.token0_address}-${i.chain}`),"error-icon":n.defaultIcon},null,8,["src","error-icon"]),o("span",null,c(i.token0_symbol),1)]),ne,o("div",oe,[$("/ "),l(_,{class:"icon-token",round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem","lazy-load":"","show-loading":"",src:i.logoURI||e.$f.formatIcon(`${i.token1_address}-${i.chain}`),"error-icon":n.defaultIcon},null,8,["src","error-icon"]),o("span",null,c(i.token1_symbol),1)])])):(d(),u("div",se,[o("div",ie,[l(_,{class:"icon-token",round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem","lazy-load":"","show-loading":"",src:e.$f.formatIcon(`${i.token1_address}-${i.chain}`),"error-icon":n.defaultIcon},null,8,["src","error-icon"]),o("span",null,c(i.token1_symbol),1)]),ae,o("div",le,[$("/ "),l(_,{class:"icon-token",round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem","lazy-load":"","show-loading":"",src:e.$f.formatIcon(`${i.token0_address}-${i.chain}`),"error-icon":n.defaultIcon},null,8,["src","error-icon"]),o("span",null,c(i.token0_symbol),1)])]))]),o("td",re,[i.target_token===i.token0_address?(d(),u(f,{key:0},[o("span",ce,c(e.$f.formatNumUnit(i.reserve0,2)),1),de,o("span",he,"/"+c(e.$f.formatNumUnit(i.reserve1,2)),1)],64)):(d(),u(f,{key:1},[o("span",me,c(e.$f.formatNumUnit(i.reserve1,2)),1),ue,o("span",pe,"/"+c(e.$f.formatNumUnit(i.reserve0,2)),1)],64))]),o("td",_e,[U(o("img",{class:"icon-svg icon-symbol",style:{cursor:"default"},src:`${e.$store.state.s3BaseUrl}swap/${i.amm}.jpeg`,alt:"",srcset:""},null,8,fe),[[y]])]),o("td",ve,[o("img",{class:"icon-svg icon-symbol",style:{cursor:"default"},src:`${e.$store.state.s3BaseUrl}chain/${i.chain}.png`,alt:"",srcset:""},null,8,ge)]),o("td",be,[o("span",ke,"$"+c(i.target_token!==i.token0_address?e.$f.formatNumUnit(Math.round(i.reserve0*i.token0_price_usd*2)):e.$f.formatNumUnit(Math.round(i.reserve1*i.token1_price_usd*2))),1),ye,o("span",we,c(e.$dayjs(i.created_at*1e3).fromNow()),1)])],8,Z))),128))]),U(l(k,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[q,a.tableList&&a.tableList.length===0&&!r.isLoading]])])}var Ne=D(T,[["render",$e],["__scopeId","data-v-6195c6b1"]]);const Ce={name:"Pool",components:{NewPairs:Ne},data(){let e=Object.values(this.$store.state.chainConfig);e=e.map(a=>({...a,amm:Object.keys(a.swapUrl)}));const t=e.reduce((a,p)=>a.concat(p.amm),[]);return{conditions:{pageNO:1,pageSize:15,sort:"created_at",direction:"desc",chain:"",amm:"",minPoolSize:1e5},initNetworkList:e,amms:t,tableData:[],loading:!1,total:1e3,show:!1,filterPopupVisible:!1,listLoading:!1,finished:!1,show1:!1,show2:!1,error:!1,poolSizeOption:[{text:"$100",value:100},{text:"$1000",value:1e3},{text:"$10000",value:1e4},{text:"$100000",value:1e5},{text:"$500000",value:5e5},{text:"$1000000",value:1e6},{text:"$2000000",value:2e6}]}},computed:{networkList(){return[{netName:"",name:this.$t("allChain")},...this.initNetworkList]},ammList(){let e=[];return this.conditions.chain?e=this.networkList.find(a=>this.conditions.chain===a.netName).swaps.map(a=>({text:a.show_name,value:a.name,icon:`${this.$store.state.s3BaseUrl}swap/${a.name}.jpeg`}))||[]:e=this.networkList.reduce((a,p)=>a.concat(p.swaps||[]),[]).map(a=>({text:a.show_name,value:a.name,icon:`${this.$store.state.s3BaseUrl}swap/${a.name}.jpeg`}))||[],[{text:this.$t("allPool"),value:""}].concat(e)},chainName(){var e,t,a,p;return this.conditions.chain&&((t=(e=this.$store.state.chainConfig)==null?void 0:e[this.conditions.chain])==null?void 0:t.name)?(p=(a=this.$store.state.chainConfig)==null?void 0:a[this.conditions.chain])==null?void 0:p.name:this.$t("allChain")},sortByList(){return[{name:this.$t("createdTime"),value:"created_at",color:this.conditions.sort==="created_at"?"#558BED":""},{name:this.$t("poolCirculatingSupply"),value:"poolSize",color:this.conditions.sort==="poolSize"?"#558BED":""}]},sortDirectionList(){return[{name:this.$t("ascending"),value:"asc",color:this.conditions.direction==="asc"?"#558BED":""},{name:this.$t("descending"),value:"desc",color:this.conditions.direction==="desc"?"#558BED":""}]},activeSort(){var e;return(e=this.sortByList.find(t=>t.value===this.conditions.sort))==null?void 0:e.name},activeDirection(){var e;return(e=this.sortDirectionList.find(t=>t.value===this.conditions.direction))==null?void 0:e.name}},activated(){this.getNewPairs()},methods:{query(){this.filterPopupVisible=!1,this.conditions.pageNO=1,this.tableData=[],this.finished=!1,this.error=!1,this.getNewPairs()},getNewPairs(){this.loading=!0,R({...this.conditions,minPoolSize:Math.round(this.conditions.minPoolSize/2)}).then(e=>{this.total=e.total;let t=Array.isArray(e)?e:[];this.tableData=this.tableData.concat(t),(this.tableData.length>=this.total||t.length<this.conditions.pageSize)&&(this.finished=!0)}).catch(()=>{this.error=!0}).finally(()=>{this.loading=!1})},selectChain(e){this.show=!1,this.$refs.dropDownChain.toggle(!1),this.conditions.chain=e.netName,this.conditions.amm="",this.query()},onLoad(){this.conditions.pageNO++,this.getNewPairs()},onSelect1(e){this.conditions.sort=e.value,this.show1=!1},onSelect2(e){this.conditions.direction=e.value,this.show2=!1}}},Le={style:{display:"flex","align-items":"center"}},Se=["src"],Ue={class:"btn-content"},ze=["src"],Be={style:{height:"50vh","overflow-y":"auto"}},De=["src"],Pe={class:"popup-title"},Ve=["src"],Ie={class:"btn-content"};function Ee(e,t,a,p,n,r){const _=m("van-notice-bar"),k=m("van-icon"),y=m("van-cell"),i=m("van-dropdown-item"),N=m("van-dropdown-menu"),z=m("new-pairs"),V=m("van-list"),C=m("van-action-sheet"),B=m("van-button"),w=m("van-field"),I=m("van-stepper"),E=m("van-form"),M=m("van-popup"),O=P("imageError");return d(),u(f,null,[l(_,{class:"new-pool-notice",mode:"closeable","left-icon":"info-o",background:"#FFFBE8",color:"#ED6A0C",wrapable:"",scrollable:!1},{default:h(()=>[$(c(e.$t("newPoolNotice")),1)]),_:1}),l(N,{"active-color":"#558BED",class:"filter-menu"},{default:h(()=>[l(i,{modelValue:n.conditions.chain,"onUpdate:modelValue":t[0]||(t[0]=s=>n.conditions.chain=s),teleport:"#app",ref:"dropDownChain"},{title:h(()=>[o("div",Le,[n.conditions.chain?(d(),u("img",{key:0,class:"icon-svg icon-net-connect",style:{cursor:"default"},src:`${e.$store.state.s3BaseUrl}chain/${n.conditions.chain}.png`,alt:"",srcset:""},null,8,Se)):g("",!0),o("span",Ue,c(r.chainName),1)])]),default:h(()=>[(d(!0),u(f,null,S(r.networkList,s=>(d(),L(y,{key:s.netName,class:"list-item",onClick:b(j=>r.selectChain(s),["stop"]),title:s.name,icon:e.$f.formatIcon(s),size:"large",clickable:"",center:""},{icon:h(()=>[s.netName?(d(),u("img",{key:0,class:"icon-svg icon-net-connect",style:{cursor:"default"},src:`${e.$store.state.s3BaseUrl}chain/${s.netName}.png`,alt:"",srcset:""},null,8,ze)):g("",!0)]),"right-icon":h(()=>[n.conditions.chain===s.netName?(d(),L(k,{key:0,color:"#558BED",name:"success"})):g("",!0)]),_:2},1032,["onClick","title","icon"]))),128))]),_:1},8,["modelValue"]),U(l(i,{modelValue:n.conditions.amm,"onUpdate:modelValue":t[1]||(t[1]=s=>n.conditions.amm=s),options:r.ammList,onChange:r.query},null,8,["modelValue","options","onChange"]),[[O]]),l(i,{modelValue:n.conditions.minPoolSize,"onUpdate:modelValue":t[2]||(t[2]=s=>n.conditions.minPoolSize=s),options:n.poolSizeOption,onChange:r.query},null,8,["modelValue","options","onChange"])]),_:1}),o("main",null,[l(V,{loading:n.loading,"onUpdate:loading":t[3]||(t[3]=s=>n.loading=s),finished:n.finished,error:n.error,"onUpdate:error":t[4]||(t[4]=s=>n.error=s),"error-text":e.$t("errorText"),onLoad:r.onLoad,"loading-text":e.$t("loading"),"finished-text":e.$t("noMore")},{default:h(()=>[l(z,{tableList:n.tableData,loading:n.loading},null,8,["tableList","loading"])]),_:1},8,["loading","finished","error","error-text","onLoad","loading-text","finished-text"]),l(C,{show:n.show,"onUpdate:show":t[5]||(t[5]=s=>n.show=s),"cancel-text":e.$t("cancel"),description:e.$t("selectChain"),teleport:"#app","close-on-click-action":""},{default:h(()=>[o("div",Be,[(d(!0),u(f,null,S(r.networkList,s=>(d(),L(y,{key:s.netName,class:"list-item",onClick:b(j=>r.selectChain(s),["stop"]),title:s.name,icon:e.$f.formatIcon(s),value:s.netName,size:"large",clickable:""},{icon:h(()=>[s.netName?(d(),u("img",{key:0,class:"icon-svg icon-net-connect",style:{cursor:"default"},src:`${e.$store.state.s3BaseUrl}chain/${s.netName}.png`,alt:"",srcset:""},null,8,De)):g("",!0)]),_:2},1032,["onClick","title","icon","value"]))),128))])]),_:1},8,["show","cancel-text","description"]),l(M,{show:n.filterPopupVisible,"onUpdate:show":t[10]||(t[10]=s=>n.filterPopupVisible=s),class:"popup-container filter",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%"}},{default:h(()=>[o("h3",Pe,c(e.$t("filterCriteria")),1),l(E,{class:"popup-content",ref:"form","validate-first":"",onSubmit:r.query,"input-align":"right"},{default:h(()=>[l(w,{label:"Chain",placeholder:"",readonly:""},{input:h(()=>[l(B,{plain:"",hairline:"",type:"primary",size:"small",onClick:t[6]||(t[6]=s=>n.show=!0)},{default:h(()=>[n.conditions.chain?(d(),u("img",{key:0,class:"icon-svg icon-net-connect",style:{cursor:"default"},src:`${e.$store.state.s3BaseUrl}chain/${n.conditions.chain}.png`,alt:"",srcset:""},null,8,Ve)):g("",!0),o("span",Ie,c(r.chainName),1),l(k,{name:"arrow-down"})]),_:1})]),_:1}),l(w,{label:e.$t("minCirculatingSupply"),placeholder:"",readonly:""},{input:h(()=>[l(I,{modelValue:n.conditions.minPoolSize,"onUpdate:modelValue":t[7]||(t[7]=s=>n.conditions.minPoolSize=s),"input-width":"80px",min:1e5,step:1e4},null,8,["modelValue"])]),_:1},8,["label"]),l(w,{label:e.$t("sortBy"),placeholder:"",readonly:"",clickable:"","right-icon":"arrow-down","model-value":r.activeSort,onClick:t[8]||(t[8]=b(s=>n.show1=!0,["stop"]))},null,8,["label","model-value"]),l(w,{label:e.$t("sortDirection"),placeholder:"",readonly:"",clickable:"","right-icon":"arrow-down","model-value":r.activeDirection,onClick:t[9]||(t[9]=b(s=>n.show2=!0,["stop"]))},null,8,["label","model-value"]),l(B,{class:"sumbit-btn",round:"",block:"",type:"primary","native-type":"submit"},{default:h(()=>[$(c(e.$t("search")),1)]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["show"]),l(C,{show:n.show1,"onUpdate:show":t[11]||(t[11]=s=>n.show1=s),"cancel-text":e.$t("cancel"),description:e.$t("sortBy"),teleport:"#app","close-on-click-action":"",actions:r.sortByList,onSelect:r.onSelect1},null,8,["show","cancel-text","description","actions","onSelect"]),l(C,{show:n.show2,"onUpdate:show":t[12]||(t[12]=s=>n.show2=s),"cancel-text":e.$t("cancel"),description:e.$t("sortDirection"),teleport:"#app","close-on-click-action":"",actions:r.sortDirectionList,onSelect:r.onSelect2},null,8,["show","cancel-text","description","actions","onSelect"])])],64)}var Oe=D(Ce,[["render",Ee],["__scopeId","data-v-bd66bb50"]]);export{Oe as default};
