import{_ as U,r,o as v,e as N,w as f,i as n,t as h,b as l,l as w,A as P,B as j,c as y,F as C,d as S,k as V,p as g,C as H,D as J,E as K,G as O,H as Q,I as W,J as X,K as Y,L as Z,m as $,x as D,z as B,M as x,N as ee,O as te,P as ie,Q as se,R as oe,S as ne,U as ae,V as le,W as re}from"./index.ac3816d8.js";const ce={name:"Rename",props:{visible:Boolean,confirmSubmit:Function},emits:["update:visible","onSubmit"],data(){const e=t=>(t==null?void 0:t.length)<=10;return{title:"",rules:[{required:!0,message:this.$t("enterGroupName")},{validator:e,message:this.$t("maximum10characters")}]}},computed:{dialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},watch:{visible(e){e&&(this.title="")}},methods:{onSubmit(){this.confirmSubmit(this.title)}}},ue={class:"popup-title"},he={class:"footer"};function de(e,t,s,c,i,a){const p=r("van-field"),m=r("van-button"),d=r("van-form"),F=r("van-popup");return v(),N(F,{show:a.dialogVisible,"onUpdate:show":t[2]||(t[2]=_=>a.dialogVisible=_),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%"}},{default:f(()=>[n("h3",ue,h(e.$t("enterGroupName")),1),l(d,{class:"popup-content",onSubmit:a.onSubmit},{default:f(()=>[l(p,{modelValue:i.title,"onUpdate:modelValue":t[0]||(t[0]=_=>i.title=_),label:"",placeholder:e.$t("maximum10characters"),clearable:"",rules:i.rules},null,8,["modelValue","placeholder","rules"]),n("div",he,[l(m,{class:"btn",type:"default",round:"",onClick:t[1]||(t[1]=_=>a.dialogVisible=!1)},{default:f(()=>[w(h(e.$t("cancel")),1)]),_:1}),l(m,{class:"btn","native-type":"submit",type:"primary",round:""},{default:f(()=>[w(h(e.$t("confirm1")),1)]),_:1})])]),_:1},8,["onSubmit"])]),_:1},8,["show"])}var M=U(ce,[["render",de],["__scopeId","data-v-c915b360"]]);const ve={name:"ChangeGroup",props:{visible:Boolean,title:{type:String,default:""},type:{type:String,default:"1"},isRemark:{type:Boolean,default:!1},selected:{type:[String,Number],default:0},groups:{type:Array,default(){return[]}}},components:{ChangeName:M},emits:["update:visible","update:selected","select"],data(){return{checked:this.initSelected,visible1:!1,remark:""}},computed:{show:{get(){return this.visible},set(e){this.$emit("update:visible",e)}},initSelected:{get(){return this.selected},set(e){this.$emit("update:selected",e)}}},watch:{show(e){e&&(this.checked=this.initSelected)}},methods:{select(){this.isRemark?this.$emit("select",this.checked,this.remark):this.$emit("select",this.checked)},addFavoriteGroup(e){this.type==="1"?this.addTokenFavoriteGroup(e):this.type==="2"&&this.addNftFavoriteGroup(e)},addTokenFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});P(e).then(s=>{s?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(s=>{console.log(s),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})},addNftFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});j(e).then(s=>{s?(this.$store.dispatch("getUserNftFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(s=>{console.log(s),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})}}},fe={class:"confirm-box"};function pe(e,t,s,c,i,a){const p=r("van-radio"),m=r("van-cell"),d=r("van-field"),F=r("van-cell-group"),_=r("van-radio-group"),G=r("van-button"),L=r("van-action-sheet"),R=r("ChangeName");return v(),y(C,null,[l(L,{show:a.show,"onUpdate:show":t[4]||(t[4]=b=>a.show=b),description:"",title:s.title,teleport:"#app"},{default:f(()=>[l(_,{modelValue:i.checked,"onUpdate:modelValue":t[3]||(t[3]=b=>i.checked=b)},{default:f(()=>[l(F,null,{default:f(()=>[l(m,{title:e.$t("defaultGroup"),clickable:"",onClick:t[0]||(t[0]=b=>i.checked=0)},{"right-icon":f(()=>[l(p,{name:0})]),_:1},8,["title"]),(v(!0),y(C,null,S(s.groups,(b,T)=>(v(),N(m,{key:T,title:b.name,clickable:"",onClick:E=>i.checked=b.group_id},{"right-icon":f(()=>[l(p,{name:b.group_id},null,8,["name"])]),_:2},1032,["title","onClick"]))),128)),l(m,{title:e.$t("newGroup"),onClick:t[1]||(t[1]=b=>i.visible1=!0),clickable:"",icon:"add-o"},null,8,["title"]),s.isRemark?(v(),N(d,{key:0,class:"input-remark",modelValue:i.remark,"onUpdate:modelValue":t[2]||(t[2]=b=>i.remark=b),rows:"1",autosize:"",label:"",type:"textarea",placeholder:e.$t("enterRemark")},null,8,["modelValue","placeholder"])):V("",!0)]),_:1})]),_:1},8,["modelValue"]),n("div",fe,[l(G,{type:"primary",onClick:g(a.select,["stop"]),round:"",block:""},{default:f(()=>[w(h(e.$t("confirm1")),1)]),_:1},8,["onClick"])])]),_:1},8,["show","title"]),l(R,{visible:i.visible1,"onUpdate:visible":t[5]||(t[5]=b=>i.visible1=b),confirmSubmit:a.addFavoriteGroup},null,8,["visible","confirmSubmit"])],64)}var A=U(ve,[["render",pe],["__scopeId","data-v-091171da"]]);const me={name:"EditRemark",props:{visible:Boolean,confirmSubmit:Function,initRemark:String},emits:["update:visible","onSubmit"],data(){const e=t=>(t==null?void 0:t.length)<=50;return{title:this.initRemark||"",rules:[{required:!0,message:this.$t("enterRemark")},{validator:e,message:this.$t("maximum50characters")}]}},computed:{dialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},watch:{visible(e){e&&(this.title=this.initRemark||"")}},methods:{onSubmit(){this.confirmSubmit(this.title)}}},ge={class:"popup-title"},_e={class:"footer"};function be(e,t,s,c,i,a){const p=r("van-field"),m=r("van-button"),d=r("van-form"),F=r("van-popup");return v(),N(F,{show:a.dialogVisible,"onUpdate:show":t[2]||(t[2]=_=>a.dialogVisible=_),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%"}},{default:f(()=>[n("h3",ge,h(e.$t("editRemark")),1),l(d,{class:"popup-content",onSubmit:a.onSubmit},{default:f(()=>[l(p,{modelValue:i.title,"onUpdate:modelValue":t[0]||(t[0]=_=>i.title=_),label:"",placeholder:e.$t("maximum50characters"),clearable:"",rules:i.rules},null,8,["modelValue","placeholder","rules"]),n("div",_e,[l(m,{class:"btn",type:"default",round:"",onClick:t[1]||(t[1]=_=>a.dialogVisible=!1)},{default:f(()=>[w(h(e.$t("cancel")),1)]),_:1}),l(m,{class:"btn","native-type":"submit",type:"primary",round:""},{default:f(()=>[w(h(e.$t("confirm1")),1)]),_:1})])]),_:1},8,["onSubmit"])]),_:1},8,["show"])}var q=U(me,[["render",be],["__scopeId","data-v-79195c08"]]);const ye={name:"TokenFavoriteManage",props:{active:{type:String,default:"1"},activeType:{type:String,default:"1"}},components:{ChangeGroup:A,ChangeName:M,EditRemark:q},data(){return{activeGroup:0,visible1:!1,visible2:!1,visible3:!1,visible4:!1,selectedToken:{},favoritesList:[],curGroup:{},show:!1,actions:[{name:"Token",value:"1"},{name:"NFT",value:"2"}],curRemark:"",curToken:{},listLoading:!1,listError:!1,finished:!1,currentPage:1,pageSize:20}},computed:{groups(){return this.$store.state.userFavoriteGroups}},watch:{activeType(e){e==="1"&&this.getUserFavorites()},activeGroup(){this.resetList(),this.getUserFavorites(1)},groups:{handler(){this.activeGroup=0},deep:!0},"$store.state.currentAccount"(e){e&&this.getUserFavorites()}},created(){this.init()},methods:{init(){this.$store.dispatch("getUserTokenFavoriteGroups"),this.getUserFavorites()},async getUserFavorites(e=1){try{let t=[];try{t=await H(this.activeGroup,e),this.listError=!1}catch(c){console.error("Failed to get favorite list:",c),this.listError=!0,this.favoritesList=[];return}if(e===1&&t.length===0)return;const s=t.map(c=>({...c,id:c.token+"-"+c.chain,address:c.token,network:c.chain,priceChange24h:c!=null&&c.price_change?(c==null?void 0:c.price_change)/100:0,priceUSD:(c==null?void 0:c.current_price_usd)||0}));this.$store.state.isFavSupportV2?(this.favoritesList=s,this.finished=!0):(e===1?this.favoritesList=s:this.favoritesList=[...this.favoritesList,...s],this.finished=s.length===0)}catch(t){console.error(t),this.listError=!0,this.finished=!0}this.listLoading=!1},onLoad(){this.listLoading=!0,this.getUserFavorites(this.currentPage+1),this.currentPage++},resetList(){this.currentPage=1,this.finished=!1,this.listLoading=!1,this.listError=!1,this.favoritesList=[]},switchGroup(e){this.selectedToken=e,this.visible1=!0},tokenSetTop(e,t){if(t===0)return;let s=this.$toast.loading({forbidClick:!0,duration:0});J(e.token+"-"+e.chain,this.activeGroup).then(c=>{this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})}).catch(()=>{this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{s.clear()})},changeFavoritesIndex(e,t,s){if(!this.$f.verifyLogin())return;let c=e.token+"-"+e.chain,i=t+s;if(i<0||i+1>this.favoritesList.length)return;let a=this.favoritesList[i],p=a.token+"-"+a.chain,m=this.$toast.loading({forbidClick:!0,duration:0});K(c,p,this.activeGroup).then(d=>{d?(this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(d=>{console.log(d),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{m.clear()})},confirmSwitchGroup(e){if(!!this.$f.verifyLogin())if(this.activeGroup!==e){let t=this.$toast.loading({forbidClick:!0,duration:0});O(this.selectedToken.token+"-"+this.selectedToken.chain,e).then(s=>{s?(this.getUserFavorites(),this.$store.dispatch("getUserFavorites"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(s=>{console.log(s),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})}else this.visible1=!1},addFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});P(e).then(s=>{s?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(s=>{console.log(s),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})},removeFavoriteGroup(e){!this.$f.verifyLogin()||this.$dialog.confirm({title:this.$t("tips"),message:this.$t("removeFavGroupTips"),confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel")}).then(()=>{let t=this.$toast.loading({forbidClick:!0,duration:0});Q(e.group_id).then(s=>{s?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(s=>{console.log(s),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})}).catch(()=>{})},setTopFavoriteGroup(e,t){if(!this.$f.verifyLogin()||t===0)return;let s=this.$toast.loading({forbidClick:!0,duration:0});W(e.group_id).then(c=>{this.$store.dispatch("getUserTokenFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")})}).catch(()=>{this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{s.clear()})},changeIndexFavoriteGroup(e,t,s){if(!this.$f.verifyLogin())return;let c=e.group_id,i=t+s;if(i<0||i+1>this.groups.length)return;let p=this.groups[i].group_id,m=this.$toast.loading({forbidClick:!0,duration:0});X(c,p).then(d=>{d?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(d=>{console.log(d),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{m.clear()})},rename(e){this.curGroup=e,this.visible3=!0},changeFavoriteGroupName(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});Y(e,this.curGroup.group_id).then(s=>{s?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(s=>{console.log(s),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})},select(e){this.activeType=e.value},handleEditRemark(e){this.curRemark=e.remark||"",this.curToken=e,this.visible4=!0},confirmEditRemark(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0}),s=this.curToken.token+"-"+this.curToken.chain;Z(s,e).then(c=>{c?(this.getUserFavorites(),this.visible4=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(c=>{console.log(c),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})}}},ke={key:0},$e={class:"fav-tabs-container"},Fe={class:"table-list"},Ge={class:"table-item table-header"},Ce={class:"table-item_d"},Ne={class:"table-item_d"},Te={class:"table-item_d"},Se={class:"table-item_d"},we={class:"token-info table-item_d"},Ue={class:"icon-token-container"},Le=["src"],Re={class:"token-symbol"},Ie={class:"table-item_d"},Ve=["onClick"],Ee={class:"table-item_d token-sort"},ze=["onClick"],De=["onClick"],Be=["onClick"],Me={class:"table-item_d"},Pe=["onClick"],je={key:1},Ae={class:"add-text"},qe={class:"table-list"},He={class:"table-item table-header"},Je={class:"table-item_d"},Ke={class:"table-item_d"},Oe={class:"table-item_d"},Qe={class:"table-item_d"},We={class:"table-item_d"},Xe={class:"table-item_d"},Ye=["onClick"],Ze={class:"table-item_d"},xe=["onClick"],et=["onClick"],tt=["onClick"],it={class:"table-item_d"},st=["onClick"];function ot(e,t,s,c,i,a){var I;const p=r("van-tab"),m=r("van-tabs"),d=r("van-image"),F=r("van-list"),_=r("van-empty"),G=r("van-icon"),L=r("van-cell"),R=r("ChangeGroup"),b=r("ChangeName"),T=r("EditRemark"),E=r("van-action-sheet");return v(),y(C,null,[s.active==="1"?(v(),y("section",ke,[n("div",$e,[l(m,{class:"fav-tabs",active:i.activeGroup,"onUpdate:active":t[0]||(t[0]=o=>i.activeGroup=o),border:"",color:"#558BED",ellipsis:!1,background:"transparent"},{default:f(()=>[l(p,{title:e.$t("defaultGroup"),name:0},null,8,["title"]),(v(!0),y(C,null,S(a.groups,(o,u)=>(v(),N(p,{key:u,title:o.name,name:o.group_id},null,8,["title","name"]))),128))]),_:1},8,["active"])]),n("ul",Fe,[n("li",Ge,[n("div",Ce,h(e.$t("token")),1),n("div",Ne,h(e.$t("changeGroup")),1),n("div",Te,h(e.$t("sort")),1),n("div",Se,h(e.$t("remark")),1)]),l(F,{loading:i.listLoading,"onUpdate:loading":t[1]||(t[1]=o=>i.listLoading=o),error:i.listError,"onUpdate:error":t[2]||(t[2]=o=>i.listError=o),finished:i.finished,"finished-text":e.$store.state.isFavSupportV2||((I=i.favoritesList)==null?void 0:I.length)===0?"":e.$t("noMore"),"error-text":e.$t("errorText"),"loading-text":e.$t("loading"),onLoad:a.onLoad,offset:"100","immediate-check":!1},{default:f(()=>[(v(!0),y(C,null,S(i.favoritesList,(o,u)=>(v(),y("li",{key:o.id,class:"table-item"},[n("div",we,[n("div",Ue,[(v(),N(d,{key:o.token+o.chain,round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem","lazy-load":"","show-loading":"",src:e.$f.formatIcon(o),"error-icon":e.iconDefault},null,8,["src","error-icon"])),o.chain?(v(),y("img",{key:0,class:"icon-svg icon-network",src:`${e.$store.state.s3BaseUrl}chain/${o.chain}.png`,alt:"",srcset:""},null,8,Le)):V("",!0)]),n("span",Re,h(o.symbol),1)]),n("div",Ie,[n("i",{class:"iconfont icon-tiaozhengzu",onClick:g(k=>a.switchGroup(o),["stop"])},null,8,Ve)]),n("div",Ee,[n("i",{class:$(["iconfont icon-zhiding",{disabled:u===0}]),onClick:g(k=>a.tokenSetTop(o,u),["stop"])},null,10,ze),n("i",{class:$(["iconfont icon-shangyi",{disabled:u===0}]),onClick:g(k=>a.changeFavoritesIndex(o,u,-1),["stop"])},null,10,De),n("i",{class:$(["iconfont icon-xiayi",{disabled:u+1===i.favoritesList.length}]),onClick:g(k=>a.changeFavoritesIndex(o,u,1),["stop"])},null,10,Be)]),n("div",Me,[n("i",{class:"iconfont icon-zhongmingming",onClick:g(k=>a.handleEditRemark(o),["stop"])},null,8,Pe)])]))),128))]),_:1},8,["loading","error","finished","finished-text","error-text","loading-text","onLoad"]),D(l(_,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[B,(i.favoritesList&&i.favoritesList.length===0||!a.groups)&&!i.listLoading]])])])):s.active==="2"?(v(),y("section",je,[l(L,{title:"",onClick:t[3]||(t[3]=o=>i.visible2=!0),clickable:""},{value:f(()=>[l(G,{class:"icon-add-o",name:"add-o"}),n("span",Ae,h(e.$t("newGroup")),1)]),_:1}),n("ul",qe,[n("li",He,[n("div",Je,h(e.$t("groupName")),1),n("div",Ke,h(e.$t("rename")),1),n("div",Oe,h(e.$t("sort")),1),n("div",Qe,h(e.$t("operate")),1)]),(v(!0),y(C,null,S(a.groups,(o,u)=>(v(),y("li",{key:u,class:"table-item"},[n("div",We,h(o.name),1),n("div",Xe,[n("i",{class:"iconfont icon-zhongmingming",onClick:g(k=>a.rename(o),["stop"])},null,8,Ye)]),n("div",Ze,[n("i",{class:$(["iconfont icon-zhiding",{disabled:u===0}]),onClick:g(k=>a.setTopFavoriteGroup(o,u),["stop"])},null,10,xe),n("i",{class:$(["iconfont icon-shangyi",{disabled:u===0}]),onClick:g(k=>a.changeIndexFavoriteGroup(o,u,-1),["stop"])},null,10,et),n("i",{class:$(["iconfont icon-xiayi",{disabled:u+1===a.groups.length}]),onClick:g(k=>a.changeIndexFavoriteGroup(o,u,1),["stop"])},null,10,tt)]),n("div",it,[n("i",{class:"iconfont icon-ashbin",onClick:g(k=>a.removeFavoriteGroup(o),["stop"])},null,8,st)])]))),128)),D(l(_,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[B,a.groups&&a.groups.length===0||!a.groups]])])])):V("",!0),l(R,{visible:i.visible1,"onUpdate:visible":t[4]||(t[4]=o=>i.visible1=o),selected:i.activeGroup,"onUpdate:selected":t[5]||(t[5]=o=>i.activeGroup=o),title:e.$t("pleaseSelectGroup"),groups:a.groups,onSelect:a.confirmSwitchGroup},null,8,["visible","selected","title","groups","onSelect"]),l(b,{visible:i.visible2,"onUpdate:visible":t[6]||(t[6]=o=>i.visible2=o),confirmSubmit:a.addFavoriteGroup},null,8,["visible","confirmSubmit"]),l(b,{visible:i.visible3,"onUpdate:visible":t[7]||(t[7]=o=>i.visible3=o),confirmSubmit:a.changeFavoriteGroupName},null,8,["visible","confirmSubmit"]),l(T,{visible:i.visible4,"onUpdate:visible":t[8]||(t[8]=o=>i.visible4=o),initRemark:i.curRemark,confirmSubmit:a.confirmEditRemark},null,8,["visible","initRemark","confirmSubmit"]),l(E,{show:i.show,"onUpdate:show":t[9]||(t[9]=o=>i.show=o),actions:i.actions,"cancel-text":e.$t("cancel"),onSelect:a.select,"close-on-click-action":""},null,8,["show","actions","cancel-text","onSelect"])],64)}var nt=U(ye,[["render",ot],["__scopeId","data-v-6301ef88"]]);const at={name:"NftFavoriteManage",props:{active:{type:String,default:"1"},activeType:{type:String,default:"1"}},components:{ChangeGroup:A,ChangeName:M,EditRemark:q},data(){return{activeGroup:0,visible1:!1,visible2:!1,visible3:!1,visible4:!1,selectedToken:{},favoritesList:[],curGroup:{},show:!1,actions:[{name:"Token",value:"1"},{name:"NFT",value:"2"}],curRemark:"",curToken:{}}},computed:{groups(){return this.$store.state.userNftFavoriteGroups},activeName(){let e={1:"Token",2:"NFT"};return(e==null?void 0:e[this.activeType])||"Token"}},watch:{activeType(e){e==="2"&&this.getUserFavorites()},activeGroup(){this.getUserFavorites()},groups:{handler(){this.activeGroup=0},deep:!0},"$store.state.currentAccount"(e){e&&this.getUserFavorites()}},created(){this.init()},methods:{init(){this.$store.dispatch("getUserNftFavoriteGroups"),this.getUserFavorites()},async getUserFavorites(){this.favoritesList=await x(this.activeGroup).catch(async()=>[])},switchGroup(e){this.selectedToken=e,this.visible1=!0},tokenSetTop(e,t){if(t===0)return;let s=this.$toast.loading({forbidClick:!0,duration:0});ee(e.id,this.activeGroup).then(c=>{this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})}).catch(()=>{this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{s.clear()})},changeNftFavoritesIndex(e,t,s){if(!this.$f.verifyLogin())return;let c=e.id,i=t+s;if(i<0||i+1>this.favoritesList.length)return;let p=this.favoritesList[i].id,m=this.$toast.loading({forbidClick:!0,duration:0});te(c,p,this.activeGroup).then(d=>{d?(this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(d=>{console.log(d),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{m.clear()})},confirmSwitchGroup(e){if(!!this.$f.verifyLogin())if(this.activeGroup!==e){let t=this.$toast.loading({forbidClick:!0,duration:0});ie(this.selectedToken.id,e).then(s=>{s?(this.getUserFavorites(),this.$store.dispatch("getUserFavorites"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(s=>{console.log(s),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})}else this.visible1=!1},addNftFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});j(e).then(s=>{s?(this.$store.dispatch("getUserNftFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(s=>{console.log(s),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})},removeNftFavoriteGroup(e){!this.$f.verifyLogin()||this.$dialog.confirm({title:this.$t("tips"),message:this.$t("removeFavGroupTips"),confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel")}).then(()=>{let t=this.$toast.loading({forbidClick:!0,duration:0});se(e.group_id).then(s=>{s?(this.$store.dispatch("getUserNftFavoriteGroups"),this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(s=>{console.log(s),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})}).catch(()=>{})},setTopNftFavoriteGroup(e,t){if(!this.$f.verifyLogin()||t===0)return;let s=this.$toast.loading({forbidClick:!0,duration:0});oe(e.group_id).then(c=>{this.$store.dispatch("getUserNftFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")})}).catch(()=>{this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{s.clear()})},changeIndexNftFavoriteGroup(e,t,s){if(!this.$f.verifyLogin())return;let c=e.group_id,i=t+s;if(i<0||i+1>this.groups.length)return;let p=this.groups[i].group_id,m=this.$toast.loading({forbidClick:!0,duration:0});ne(c,p).then(d=>{d?(this.$store.dispatch("getUserNftFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(d=>{console.log(d),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{m.clear()})},rename(e){this.curGroup=e,this.visible3=!0},changeNftFavoriteGroupName(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});ae(e,this.curGroup.group_id).then(s=>{s?(this.$store.dispatch("getUserNftFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(s=>{console.log(s),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})},select(e){this.activeType=e.value},handleEditRemark(e){this.curRemark=e.remark||"",this.curToken=e,this.visible4=!0},confirmEditRemark(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});le(this.curToken.id,e).then(s=>{s?(this.getUserFavorites(),this.visible4=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(s=>{console.log(s),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})}}},lt={key:0},rt={class:"fav-tabs-container"},ct={class:"table-list"},ut={class:"table-item table-header"},ht={class:"table-item_d"},dt={class:"table-item_d"},vt={class:"table-item_d"},ft={class:"table-item_d"},pt={class:"table-item"},mt={class:"token-info table-item_d"},gt={class:"icon-token-container"},_t={class:"token-symbol"},bt={class:"table-item_d"},yt=["onClick"],kt={class:"table-item_d token-sort"},$t=["onClick"],Ft=["onClick"],Gt=["onClick"],Ct={class:"table-item_d"},Nt=["onClick"],Tt={key:1},St={class:"add-text"},wt={class:"table-list"},Ut={class:"table-item table-header"},Lt={class:"table-item_d"},Rt={class:"table-item_d"},It={class:"table-item_d"},Vt={class:"table-item_d"},Et={class:"table-item_d"},zt={class:"table-item_d"},Dt=["onClick"],Bt={class:"table-item_d"},Mt=["onClick"],Pt=["onClick"],jt=["onClick"],At={class:"table-item_d"},qt=["onClick"];function Ht(e,t,s,c,i,a){var I;const p=r("van-tab"),m=r("van-tabs"),d=r("van-image"),F=r("DynamicScrollerItem"),_=r("DynamicScroller"),G=r("van-empty"),L=r("van-icon"),R=r("van-cell"),b=r("ChangeGroup"),T=r("ChangeName"),E=r("EditRemark");return v(),y(C,null,[s.active==="1"?(v(),y("section",lt,[n("div",rt,[l(m,{class:"fav-tabs",active:i.activeGroup,"onUpdate:active":t[0]||(t[0]=o=>i.activeGroup=o),border:"",color:"#558BED",ellipsis:!1,background:"transparent"},{default:f(()=>[l(p,{title:e.$t("defaultGroup"),name:0},null,8,["title"]),(v(!0),y(C,null,S(a.groups,(o,u)=>(v(),N(p,{key:u,title:o.name,name:o.group_id},null,8,["title","name"]))),128))]),_:1},8,["active"])]),n("ul",ct,[n("li",ut,[n("div",ht,h(e.$t("token")),1),n("div",dt,h(e.$t("changeGroup")),1),n("div",vt,h(e.$t("sort")),1),n("div",ft,h(e.$t("remark")),1)]),((I=i.favoritesList)==null?void 0:I.length)>0?(v(),N(_,{key:0,items:i.favoritesList,"min-item-size":30,keyField:"id","page-mode":"",class:"scroller"},{default:f(({item:o,index:u,active:k})=>[l(F,{item:o,active:k,"data-index":u},{default:f(()=>[n("li",pt,[n("div",mt,[n("div",gt,[l(d,{round:"",width:"0.72rem",height:"0.72rem","icon-size":"0.72rem","lazy-load":"","show-loading":"",src:(o==null?void 0:o.logo)||e.iconDefault,"error-icon":e.iconDefault},null,8,["src","error-icon"])]),n("span",_t,h((o==null?void 0:o.name)||""),1)]),n("div",bt,[n("i",{class:"iconfont icon-tiaozhengzu",onClick:g(z=>a.switchGroup(o),["stop"])},null,8,yt)]),n("div",kt,[n("i",{class:$(["iconfont icon-zhiding",{disabled:u===0}]),onClick:g(z=>a.tokenSetTop(o,u),["stop"])},null,10,$t),n("i",{class:$(["iconfont icon-shangyi",{disabled:u===0}]),onClick:g(z=>a.changeNftFavoritesIndex(o,u,-1),["stop"])},null,10,Ft),n("i",{class:$(["iconfont icon-xiayi",{disabled:u+1===i.favoritesList.length}]),onClick:g(z=>a.changeNftFavoritesIndex(o,u,1),["stop"])},null,10,Gt)]),n("div",Ct,[n("i",{class:"iconfont icon-zhongmingming",onClick:g(z=>a.handleEditRemark(o),["stop"])},null,8,Nt)])])]),_:2},1032,["item","active","data-index"])]),_:1},8,["items"])):V("",!0),D(l(G,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[B,i.favoritesList&&i.favoritesList.length===0||!a.groups]])])])):s.active==="2"?(v(),y("section",Tt,[l(R,{title:"",onClick:t[1]||(t[1]=o=>i.visible2=!0),clickable:""},{value:f(()=>[l(L,{class:"icon-add-o",name:"add-o"}),n("span",St,h(e.$t("newGroup")),1)]),_:1}),n("ul",wt,[n("li",Ut,[n("div",Lt,h(e.$t("groupName")),1),n("div",Rt,h(e.$t("rename")),1),n("div",It,h(e.$t("sort")),1),n("div",Vt,h(e.$t("operate")),1)]),(v(!0),y(C,null,S(a.groups,(o,u)=>(v(),y("li",{key:u,class:"table-item"},[n("div",Et,h(o.name),1),n("div",zt,[n("i",{class:"iconfont icon-zhongmingming",onClick:g(k=>a.rename(o),["stop"])},null,8,Dt)]),n("div",Bt,[n("i",{class:$(["iconfont icon-zhiding",{disabled:u===0}]),onClick:g(k=>a.setTopNftFavoriteGroup(o,u),["stop"])},null,10,Mt),n("i",{class:$(["iconfont icon-shangyi",{disabled:u===0}]),onClick:g(k=>a.changeIndexNftFavoriteGroup(o,u,-1),["stop"])},null,10,Pt),n("i",{class:$(["iconfont icon-xiayi",{disabled:u+1===a.groups.length}]),onClick:g(k=>a.changeIndexNftFavoriteGroup(o,u,1),["stop"])},null,10,jt)]),n("div",At,[n("i",{class:"iconfont icon-ashbin",onClick:g(k=>a.removeNftFavoriteGroup(o),["stop"])},null,8,qt)])]))),128)),D(l(G,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[B,a.groups&&a.groups.length===0||!a.groups]])])])):V("",!0),l(b,{visible:i.visible1,"onUpdate:visible":t[2]||(t[2]=o=>i.visible1=o),selected:i.activeGroup,"onUpdate:selected":t[3]||(t[3]=o=>i.activeGroup=o),title:e.$t("pleaseSelectGroup"),groups:a.groups,onSelect:a.confirmSwitchGroup},null,8,["visible","selected","title","groups","onSelect"]),l(T,{visible:i.visible2,"onUpdate:visible":t[4]||(t[4]=o=>i.visible2=o),confirmSubmit:a.addNftFavoriteGroup},null,8,["visible","confirmSubmit"]),l(T,{visible:i.visible3,"onUpdate:visible":t[5]||(t[5]=o=>i.visible3=o),confirmSubmit:a.changeNftFavoriteGroupName},null,8,["visible","confirmSubmit"]),l(E,{visible:i.visible4,"onUpdate:visible":t[6]||(t[6]=o=>i.visible4=o),initRemark:i.curRemark,confirmSubmit:a.confirmEditRemark},null,8,["visible","initRemark","confirmSubmit"])],64)}var Jt=U(at,[["render",Ht],["__scopeId","data-v-2d249f2d"]]);const Kt={name:"FavoriteManage",data(){return{active:this.$route.params.id||"1",activeType:this.$route.params.type||"1",show:!1,actions:[{name:"Token",value:"1"},{name:"NFT",value:"2"}]}},computed:{curComponent(){return this.activeType==="2"?Jt:nt},activeName(){let e={1:"Token",2:"NFT"};return(e==null?void 0:e[this.activeType])||"Token"}},methods:{select(e){this.activeType=e.value},back(){var e,t,s;(e=window==null?void 0:window.main)!=null&&e.back?(s=(t=window==null?void 0:window.main)==null?void 0:t.back)==null||s.call(t):this.$router.go(-1)}}};function Ot(e,t,s,c,i,a){const p=r("van-tab"),m=r("van-tabs"),d=r("van-icon"),F=r("van-nav-bar"),_=r("van-action-sheet");return v(),y(C,null,[l(F,{"left-text":"","left-arrow":"",onClickLeft:e.$f.goBack,fixed:"",placeholder:"","safe-area-inset-top":"","z-index":"2"},{title:f(()=>[l(m,{class:"tab-top",active:i.active,"onUpdate:active":t[0]||(t[0]=G=>i.active=G),type:"card",color:"#fff",background:"#2C3254","title-active-color":"#878FBC","title-inactive-color":"#878FBC"},{default:f(()=>[l(p,{title:e.$t("favoriteManage"),name:"1"},null,8,["title"]),l(p,{title:e.$t("groupManage"),name:"2"},null,8,["title"])]),_:1},8,["active"])]),right:f(()=>[n("button",{class:"select-btn",onClick:t[1]||(t[1]=g(G=>i.show=!0,["stop"]))},[w(h(a.activeName)+" ",1),l(d,{name:"arrow-down"})])]),_:1},8,["onClickLeft"]),(v(),N(re(a.curComponent),{activeType:i.activeType,active:i.active},null,8,["activeType","active"])),l(_,{show:i.show,"onUpdate:show":t[2]||(t[2]=G=>i.show=G),actions:i.actions,"cancel-text":e.$t("cancel"),onSelect:a.select,"close-on-click-action":""},null,8,["show","actions","cancel-text","onSelect"])],64)}var Wt=U(Kt,[["render",Ot],["__scopeId","data-v-1991bf18"]]);export{Wt as default};
